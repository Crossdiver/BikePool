<!DOCTYPE html>
<html> 
	<head> 
	<title>Popular Routes - BikePool</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="css/jquery.mobile-1.1.0.css" />
		<link rel="stylesheet" href="css/main.css" />
	<link href='http://fonts.googleapis.com/css?family=Bree+Serif|Open+Sans' rel='stylesheet' type='text/css'>
	<script src="js/jquery-1.7.2.min.js"></script>
	<script src="js/modernizr.js"></script>
	<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?sensor=false">
    </script>
	<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
<body> 

<div data-role="routes">

	<div data-role="header">
		<h1>Popular Routes</h1>
	</div><!-- /header -->

	<div data-role="content">
		<h2>Pick a popular route:</h2>
		<div id="map_content" width="100%"></div>
		<ul data-role="listview" style="padding-top: 30px;">
			<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="d" >
				<a href="#">Brooklyn to Manhattan</a>
			</li>
			<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="d" >
				<a href="#">Flatiron to East Village</a>
			</li>
			<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="d" >
				<a href="#">Queens to Jamaica</a>
			</li>
			<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="d" >
				<a href="#">Richwood to Brooklyn</a>
			</li>
			<li data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-icon="arrow-r" data-iconpos="right" data-theme="d" >
				<a href="#">Chelsea to Soho</a>
			</li>
		</ul>
	</div><!-- /content -->

	<script>
		var map;
		var directionsService = new google.maps.DirectionsService();
		
		if (Modernizr.geolocation) {
			show_map();
			//navigator.geolocation.getCurrentPosition(show_map, handle_error);
	    } else {
	    	alert("not supported");
		}

	    function show_map(position) {
	    	if (position) {
	    		var initialLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
	    	} else {
	    		var initialLocation = new google.maps.LatLng(40.6952, -73.9871);
	    	}
	    
	        var myOptions = {
	            zoom: 12, 
	            center: initialLocation, 
	            mapTypeId: google.maps.MapTypeId.ROADMAP
	        };
	        map = new google.maps.Map(document.getElementById("map_content"), myOptions);
	        document.getElementById('map_content').style.height = '250px';
	        google.maps.event.trigger(map, 'resize')

	    }

	    function handle_error(err) {
	        if (err.code == 1) {
	        }
	    }

	    var routesLayer = new google.maps.KmlLayer('https://dl.dropbox.com/u/5121315/Personal/ReinventGreen/BikePool%20Rides.kml',{preserveViewport:true});
	        routesLayer.setMap(map);

	</script>

</div><!-- /page -->

</body>
</html>
